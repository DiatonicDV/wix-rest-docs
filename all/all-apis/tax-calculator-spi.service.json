{
  "name": "Tax Calculator SPI",
  "client_id": "https://github.com/wix-private/ecom/tree/master/server/wix-ecommerce-server/tax/tax-calculator-spi#public",
  "memberOf": "All APIs",
  "category": "core",
  "mixes": [],
  "labels": [],
  "docs":   {
    "summary": "",
    "description": []
  },
  "properties": [],
  "tags": [  {
    "name": "Additional Fees SPI",
    "entity": null
  }],
  "relatedGuides": [],
  "operations": [  {
    "name": "Calculate Tax",
    "methodName": "CalculateTax",
    "serviceName": "TaxCalculatorSpi",
    "tag": "Additional Fees SPI",
    "permissions": [],
    "events": [],
    "labels": [],
    "nameParams": [],
    "params": [    {
      "in": "BODY",
      "name": "estimateTaxRequestDetails",
      "type": "All APIs.Tax Calculator SPI._wix_billing_spi_v1_EstimateTaxRequestDetails",
      "doc": " The Estimate Tax request details - elaborated in the EstimateTaxRequestDetails message.\n",
      "required": false
    }],
    "ret":     {
      "type":       {
        "name": "CalculateTax",
        "statusCode": "200",
        "typeParams": ["All APIs.Tax Calculator SPI._wix_billing_spi_v1_CalculateTaxResponse"]
      },
      "doc": ""
    },
    "locations": [],
    "docs":     {
      "summary": " calculate the tax on the given request\n \n",
      "description": [],
      "request": "POST",
      "url": "https://www.<your-deployment-uri>.com/v1/calculate-tax",
      "links": [],
      "examples": [],
      "extra": {}
    },
    "extra":     {
      "hasRest": true,
      "rpcRequestName": "CalculateTaxRequest",
      "rpcResponseName": "CalculateTaxResponse"
    },
    "customLabels": [{"id": "maturity-beta"}]
  }],
  "events": [],
  "callbacks": [],
  "messages":   [
        {
      "name": "_wix_api_ApplicationError",
      "displayName": "Application Error Object",
      "locations": [],
      "docs":       {
        "summary": "",
        "links": [],
        "examples": []
      },
      "members":       [
                {
          "name": "code",
          "type": "string",
          "doc": " Error code.\n"
        },
                {
          "name": "description",
          "type": "string",
          "doc": " Description of the error.\n"
        },
                {
          "name": "data",
          "type": "struct",
          "doc": " Data related to the error.\n"
        }
      ],
      "enum": null,
      "extra": {},
      "labels": []
    },
        {
      "name": "_wix_billing_spi_v1_CalculateTaxRequest",
      "displayName": "Calculate Tax Request Object",
      "locations": [],
      "docs":       {
        "summary": "",
        "links": [],
        "examples": []
      },
      "members": [      {
        "name": "estimateTaxRequestDetails",
        "type": "All APIs.Tax Calculator SPI._wix_billing_spi_v1_EstimateTaxRequestDetails",
        "doc": " The Estimate Tax request details - elaborated in the EstimateTaxRequestDetails message.\n"
      }],
      "enum": null,
      "extra": {},
      "labels": []
    },
        {
      "name": "_wix_billing_spi_v1_CalculateTaxResponse",
      "displayName": "Calculate Tax Response Object",
      "locations": [],
      "docs":       {
        "summary": "",
        "links": [],
        "examples": []
      },
      "members": [      {
        "name": "taxEstimate",
        "type": "All APIs.Tax Calculator SPI._wix_billing_spi_v1_TaxEstimate",
        "doc": " The tax estimation result - elaborated in the TaxEstimate message.\n"
      }],
      "enum": null,
      "extra": {},
      "labels": []
    },
        {
      "name": "_wix_billing_spi_v1_TaxEstimate",
      "displayName": "Tax Estimate Object",
      "locations": [],
      "docs":       {
        "summary": "",
        "links": [],
        "examples": []
      },
      "members":       [
                {
          "name": "id",
          "type": "string",
          "doc": " Tax Estimation ID.\n"
        },
                {
          "name": "externalId",
          "type": "string",
          "doc": " An optional identifier of the entity that you are calculating tax for. For example, cart ID or checkout ID.\n"
        },
                {
          "name": "taxDate",
          "type": "string",
          "doc": " The time when the tax estimation was calculated.\n"
        },
                {
          "name": "currencyCode",
          "type": "string",
          "doc": " The tax estimation three-character ISO 4217 currency code that was used for payment for this transaction.\n"
        },
                {
          "name": "totalAmount",
          "type": "string",
          "doc": " The total amount of this estimate (the actual amount of money that exchanged hands).\n"
        },
                {
          "name": "totalExempt",
          "type": "string",
          "doc": " The amount of this estimate that was exempt (for all lines).\n"
        },
                {
          "name": "totalTax",
          "type": "string",
          "doc": " The total amount of tax calculated for all lines in this estimate.\n"
        },
                {
          "name": "totalTaxable",
          "type": "string",
          "doc": " The portion of the total amount of this estimate that was taxable.\n"
        },
                {
          "name": "averageTaxRate",
          "type": "string",
          "doc": " Total tax divided by total taxable.\n"
        },
                {
          "name": "addressesInfo",
          "type":           {
            "name": "array",
            "typeParams": ["All APIs.Tax Calculator SPI._wix_billing_spi_v1_Address"]
          },
          "doc": " All the relevant addresses for this estimation should be listed here. Line items will hold only reference to them.\n"
        },
                {
          "name": "exemptions",
          "type": "All APIs.Tax Calculator SPI._wix_billing_spi_v1_Exemptions",
          "doc": " Optional tax exemptions.\n"
        },
                {
          "name": "lineItemsTax",
          "type":           {
            "name": "array",
            "typeParams": ["All APIs.Tax Calculator SPI._wix_billing_spi_v1_LineItemTaxModel"]
          },
          "doc": " The calculated tax for each line.\n"
        },
                {
          "name": "errors",
          "type":           {
            "name": "array",
            "typeParams": ["All APIs.Tax Calculator SPI._wix_api_ApplicationError"]
          },
          "doc": " The errors that occurred during the tax calculation.\n"
        },
                {
          "name": "totalTaxIncludedInPrice",
          "type": "string",
          "doc": " The sum of all the tax that is already included in the price.\n"
        }
      ],
      "enum": null,
      "extra": {},
      "labels": []
    },
        {
      "name": "_wix_billing_spi_v1_LineItemTaxModel",
      "displayName": "Line Item Tax Model Object",
      "locations": [],
      "docs":       {
        "summary": "*\nLineItemTaxModel represents tax information for a line item.\n",
        "links": [],
        "examples": []
      },
      "members":       [
                {
          "name": "lineNumber",
          "type": "string",
          "doc": " The ID of the line item.\n"
        },
                {
          "name": "description",
          "type": "string",
          "doc": " Line description.\n"
        },
                {
          "name": "destinationAddressIndex",
          "type": "integer",
          "doc": " The index of the \"destination\" address in the TaxEstimate addresses_info.\n"
        },
                {
          "name": "originAddressIndex",
          "type": "integer",
          "doc": " The index of the \"origin\" address in the TaxEstimate addresses_info.\n"
        },
                {
          "name": "exemptAmount",
          "type": "string",
          "doc": " The amount of this line item that was exempt. (Decimal value)\n"
        },
                {
          "name": "exemptionIds",
          "type":           {
            "name": "array",
            "typeParams": ["integer"]
          },
          "doc": " IDs of the used exemptions from the TaxEstimate exemptions array.\n"
        },
                {
          "name": "isItemTaxable",
          "type": "boolean",
          "doc": " True for items we have a tax applied on them.\n"
        },
                {
          "name": "quantity",
          "type": "integer",
          "doc": " The number of items (must be between 0 and 1,000,000).\n"
        },
                {
          "name": "lineAmount",
          "type": "string",
          "doc": " The total amount of the line, including both taxable and exempt.\n This is the total price for all items. To determine the individual item price,\n divide this by quantity. (Decimal value)\n"
        },
                {
          "name": "tax",
          "type": "string",
          "doc": " The tax for this line in this estimation. (Decimal value)\n"
        },
                {
          "name": "taxableAmount",
          "type": "string",
          "doc": " The taxable amount of this line. (Decimal value)\n"
        },
                {
          "name": "taxIncluded",
          "type": "boolean",
          "doc": " True if the lineAmount includes tax in it.\n"
        },
                {
          "name": "taxDetails",
          "type":           {
            "name": "array",
            "typeParams": ["All APIs.Tax Calculator SPI._wix_billing_spi_v1_LineItemDetailTaxModel"]
          },
          "doc": " A detailed description of all the tax authorities applied on this item and exemptions.\n"
        },
                {
          "name": "calculatorName",
          "type": "string",
          "doc": " The calculator that calculated this line tax.\n"
        },
                {
          "name": "taxAddressHasTaxRegion",
          "type": "boolean",
          "doc": " True if the seller has a tax region defined for this line item taxable address.\n"
        },
                {
          "name": "averageTaxRate",
          "type": "string",
          "doc": " The rate at which this line item tax was calculated, a number between 0.0 to 1.0.\n (This is the average of the tax applied from all the LineItemDetailTaxModel)\n"
        }
      ],
      "enum": null,
      "extra": {},
      "labels": []
    },
        {
      "name": "_wix_billing_spi_v1_LineItemDetailTaxModel",
      "displayName": "Line Item Detail Tax Model Object",
      "locations": [],
      "docs":       {
        "summary": "*\nLineItemDetailTaxModel represents tax information for a line item.\nIt will hold the tax amount and the tax rate for each tax authority that apply on the line item.\n",
        "links": [],
        "examples": []
      },
      "members":       [
                {
          "name": "lineNumber",
          "type": "string",
          "doc": " The id of the line item\n"
        },
                {
          "name": "jurisdictionName",
          "type": "string",
          "doc": " The name of the jurisdiction in which this tax detail applies.\n"
        },
                {
          "name": "exemptAmount",
          "type": "string",
          "doc": " The amount of this line item that was exempt from this authority. (Decimal value)\n"
        },
                {
          "name": "exemptionIds",
          "type":           {
            "name": "array",
            "typeParams": ["integer"]
          },
          "doc": " IDs of the used exemptions from the TaxEstimate exemptions array.\n"
        },
                {
          "name": "nonTaxableAmount",
          "type": "string",
          "doc": " The amount of this line item price that was considered nontaxable. (Decimal value)\n"
        },
                {
          "name": "rate",
          "type": "string",
          "doc": " The rate at which this tax detail was calculated, a number between 0.0000 to 1.0000.\n"
        },
                {
          "name": "tax",
          "type": "string",
          "doc": " The amount of tax estimated for this line item. (Decimal value)\n"
        },
                {
          "name": "taxableAmount",
          "type": "string",
          "doc": " The taxable amount of this line item. (Decimal value)\n"
        },
                {
          "name": "taxType",
          "type": "string",
          "doc": " The type of tax that was calculated. Depends on the company's nexus settings as well as the jurisdiction's tax laws.\n"
        },
                {
          "name": "taxName",
          "type": "string",
          "doc": " The name of the tax against which this tax amount was calculated.\n"
        },
                {
          "name": "isFee",
          "type": "boolean",
          "doc": " The Taxes/Fee component. True if the fee is applied.\n"
        },
                {
          "name": "jurisdictionType",
          "type": "All APIs.Tax Calculator SPI._wix_billing_spi_v1_JurisdictionType",
          "doc": " The type of the jurisdiction in which this tax detail applies (e.g. Country,State,County,City,Special).\n"
        }
      ],
      "enum": null,
      "extra": {},
      "labels": []
    },
        {
      "name": "_wix_billing_spi_v1_EstimateTaxRequestDetails",
      "displayName": "Estimate Tax Request Details Object",
      "locations": [],
      "docs":       {
        "summary": "*\nTaxEstimateRequestDetails represents the details required to calculate tax for a transaction.\n",
        "links": [],
        "examples": []
      },
      "members":       [
                {
          "name": "externalId",
          "type": "string",
          "doc": " An optional identifier of the entity that you are calculating tax for. For example, cart ID or checkout ID.\n"
        },
                {
          "name": "taxDate",
          "type": "string",
          "doc": " The time when the tax estimation was calculated.\n"
        },
                {
          "name": "exemptions",
          "type": "All APIs.Tax Calculator SPI._wix_billing_spi_v1_Exemptions",
          "doc": " A list of tax exemptions to be applied.\n"
        },
                {
          "name": "currencyCode",
          "type": "string",
          "doc": " The tax estimation three-character ISO 4217 currency code that was used for payment for this transaction.\n"
        },
                {
          "name": "addressesInfo",
          "type":           {
            "name": "array",
            "typeParams": ["All APIs.Tax Calculator SPI._wix_billing_spi_v1_Address"]
          },
          "doc": " All the relevant addresses for this estimation should be listed here. Line items will hold only reference to them.\n"
        },
                {
          "name": "lineItems",
          "type":           {
            "name": "array",
            "typeParams": ["All APIs.Tax Calculator SPI._wix_billing_spi_v1_LineItem"]
          },
          "doc": " A list of line items to be taxed.\n"
        },
                {
          "name": "currencyFractionSize",
          "type": "integer",
          "doc": " The desired currency fraction size. Optional, default is 2.\n This will affect the way we will format the tax amount, but not affect the rate value that is always 4 as its 0.0000 to 1.0000 value.\n e.g. when using USD the required fraction size is 2 - so for 25.544$ we will show 25.55$. (round up)\n"
        },
                {
          "name": "estimationId",
          "type": "string",
          "doc": " External estimateTax Id\n"
        }
      ],
      "enum": null,
      "extra": {},
      "labels": []
    },
        {
      "name": "_wix_billing_spi_v1_Exemptions",
      "displayName": "Exemptions Object",
      "locations": [],
      "docs":       {
        "summary": "",
        "links": [],
        "examples": []
      },
      "members": [      {
        "name": "exemptions",
        "type":         {
          "name": "array",
          "typeParams": ["All APIs.Tax Calculator SPI._wix_billing_spi_v1_ExemptionModel"]
        },
        "doc": " A list of tax exemptions to be applied. see ExemptionModel.\n"
      }],
      "enum": null,
      "extra": {},
      "labels": []
    },
        {
      "name": "_wix_billing_spi_v1_ExemptionModel",
      "displayName": "Exemption Model Object",
      "locations": [],
      "docs":       {
        "summary": "*\nExemption allows the user to specify what tax is exempt (no need to pay) by giving the vatId && taxType that this vat id refers to.\n",
        "links": [],
        "examples": []
      },
      "members":       [
                {
          "name": "vatId",
          "type": "string",
          "doc": " The vat id of the buyer.\n"
        },
                {
          "name": "taxType",
          "type": "string",
          "doc": " The tax type this vat id exempt from.\n"
        }
      ],
      "enum": null,
      "extra": {},
      "labels": []
    },
        {
      "name": "_wix_billing_spi_v1_LineItem",
      "displayName": "Line Item Object",
      "locations": [],
      "docs":       {
        "summary": "*\nLineItem represents information about a line item.\n",
        "links": [],
        "examples": []
      },
      "members":       [
                {
          "name": "lineNumber",
          "type": "string",
          "doc": " The ID of the line item.\n"
        },
                {
          "name": "quantity",
          "type": "integer",
          "doc": " The number of items in this line (must be between 0 and 1,000,000).\n"
        },
                {
          "name": "price",
          "type": "string",
          "doc": " The price of the line item (Decimal value).\n"
        },
                {
          "name": "taxGroupId",
          "type": "string",
          "doc": " The tax group ID this item is related to.\n"
        },
                {
          "name": "defaultTaxGroupId",
          "type": "string",
          "doc": " the default tax group ID of this item - will be used in case we did not find mapping for the taxGroupId\n"
        },
                {
          "name": "itemCode",
          "type": "string",
          "doc": " The known SKU (item code) for this line item.\n"
        },
                {
          "name": "taxIncluded",
          "type": "boolean",
          "doc": " Indicates whether the price already includes tax. If not provided, the default from the relevant tax region is used.\n"
        },
                {
          "name": "description",
          "type": "string",
          "doc": " Free text description for this line item. (Optional)\n"
        },
                {
          "name": "addressIndices",
          "type": "All APIs.Tax Calculator SPI._wix_billing_spi_v1_AddressesModel",
          "doc": " The address of this line, which can be either from and to locations, or a single location.\n"
        },
                {
          "name": "taxRegionId",
          "type": "string",
          "doc": " The tax region ID representing this item address model\n"
        }
      ],
      "enum": null,
      "extra": {},
      "labels": []
    },
        {
      "name": "_wix_billing_spi_v1_AddressesModel",
      "displayName": "Addresses Model Object",
      "locations": [],
      "docs":       {
        "summary": "",
        "links": [],
        "examples": []
      },
      "members": [      {
        "name": "AddressInfo",
        "type": "All APIs.Tax Calculator SPI._wix_billing_spi_v1_AddressesModel_AddressInfo",
        "doc": ""
      }],
      "enum": null,
      "extra": {},
      "labels": []
    },
        {
      "name": "_wix_billing_spi_v1_AddressesModel_AddressInfo",
      "displayName": "Address Info Object",
      "locations": [],
      "docs":       {
        "summary": "",
        "links": [],
        "examples": []
      },
      "members":       [
                {
          "name": "singleLocationAddressIndex",
          "type": "integer",
          "doc": " Tax should be calculated by a single location. e.g. a store location.\n Index refers to the address in the TaxEstimate addresses_info list.\n"
        },
                {
          "name": "fromToLocationsIndices",
          "type": "All APIs.Tax Calculator SPI._wix_billing_spi_v1_FromToAddressesIndices",
          "doc": " Tax should be calculated by a \"from\" and \"to\" locations. e.g. a shipping address.\n"
        }
      ],
      "enum": null,
      "extra": {},
      "labels": [],
      "oneOf": true
    },
        {
      "name": "_wix_billing_spi_v1_FromToAddressesIndices",
      "displayName": "From To Addresses Indices Object",
      "locations": [],
      "docs":       {
        "summary": "",
        "links": [],
        "examples": []
      },
      "members":       [
                {
          "name": "fromAddressIndex",
          "type": "integer",
          "doc": " The index of the \"from\" address in the TaxEstimate addresses_info list.\n"
        },
                {
          "name": "toAddressIndex",
          "type": "integer",
          "doc": " The index of the \"to\" address in the TaxEstimate addresses_info list.\n"
        }
      ],
      "enum": null,
      "extra": {},
      "labels": []
    },
        {
      "name": "_wix_billing_spi_v1_Address",
      "displayName": "Address Object",
      "locations": [],
      "docs":       {
        "summary": "*\nWix common address format for physical address to use if you plan to store addresses in your service.\n",
        "links": [],
        "examples": []
      },
      "members":       [
                {
          "name": "country",
          "type": "string",
          "doc": " Country code - 2 letters ISO-3166-1.\n"
        },
                {
          "name": "subdivision",
          "type": "string",
          "doc": " Subdivision. Usually a state, region, prefecture, or province code, according to [ISO 3166-2](https://en.wikipedia.org/wiki/ISO_3166-2).\n"
        },
                {
          "name": "city",
          "type": "string",
          "doc": " City name.\n"
        },
                {
          "name": "postalCode",
          "type": "string",
          "doc": " Zip/postal code.\n"
        },
                {
          "name": "addressLine",
          "type": "string",
          "doc": " Main address line, usually street and number as free text.\n"
        },
                {
          "name": "addressLine2",
          "type": "string",
          "doc": " Free text providing more detailed address info. Usually contains Apt, Suite, and Floor.\n"
        }
      ],
      "enum": null,
      "extra": {},
      "labels": []
    },
        {
      "name": "_wix_billing_spi_v1_JurisdictionType",
      "displayName": "Jurisdiction Type Object",
      "locations": [],
      "docs":       {
        "summary": "*\nJurisdictionType represents the type of the jurisdiction in which this tax detail applies (e.g. Country,State,County,City,Special).\n \n Possible values are: <li><code> UNDEFINED <\/code><\/li><li><code> COUNTRY <\/code><\/li><li><code> STATE <\/code><\/li><li><code> COUNTY <\/code><\/li><li><code> CITY <\/code><\/li><li><code> SPECIAL <\/code><\/li>",
        "links": [],
        "examples": []
      },
      "members": [],
      "enum":       [
        "UNDEFINED",
        "COUNTRY",
        "STATE",
        "COUNTY",
        "CITY",
        "SPECIAL"
      ],
      "extra": {},
      "labels": []
    }
  ],
  "extra": {"artifactId": "com.wixpress.billing.tax.calculators.manual.manual-calc"}
}